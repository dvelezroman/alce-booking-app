<div class="box">

  <form [formGroup]="form" (ngSubmit)="submitForm()">
    <div class="field">
      <label class="label">Nombre</label>
      <div class="control">
        <input
          type="text"
          class="input"
          formControlName="name"
          placeholder="Nombre del grupo"
        />
      </div>
    </div>

    <div class="field">
      <label class="label">Descripción</label>
      <div class="control">
        <input
          type="text"
          class="input"
          formControlName="description"
          placeholder="Descripción del grupo"
        />
      </div>
    </div>

    <!-- Lista de IDs de usuarios actuales con opción a eliminar -->
    <div class="field" *ngIf="displayedUsers.length">
      <label class="label">Usuarios actuales</label>
      <div class="pseudo-textarea">
        <div
          class="pseudo-textarea-line"
          *ngFor="let user of displayedUsers"
        >
          <span>{{ user.label }}</span>
          <button
            *ngIf="!groupToEdit"
            type="button"
            class="delete-user-btn"
            (click)="removeUserFromGroup(user.id)"
            title="Eliminar"
          >
            ✖
          </button>
        </div>
      </div>
    </div>

    <div class="field" *ngIf="!groupToEdit">
      <label class="label">Seleccionar tipo de usuario</label>
      <div class="control">
        <div class="select is-fullwidth">
          <select (change)="onRoleChange($event)">
            <option [ngValue]="null">-- Selecciona --</option>
            <option value="student">Estudiantes</option>
            <option value="instructor">Instructores</option>
          </select>
        </div>
      </div>
    </div>

    <div class="field mt-3" *ngIf="!groupToEdit && selectedRole">
      <app-user-selector
        [role]="selectedRole"
        (usersSelected)="onUsersSelected($event)"
      ></app-user-selector>
    </div>

    <div class="field mt-4">
      <button class="button is-primary" type="submit">
        {{ groupToEdit ? 'Actualizar grupo' : 'Crear grupo' }}
      </button>
    </div>
  </form>
</div>