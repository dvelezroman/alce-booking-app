<div class="table-container">
  <table class="table-results is-fullwidth" *ngIf="meetings && meetings.length > 0">
    <thead>
      <tr>
        <th>Stage</th>
        <th>Categoría</th>
        <th>Nombre</th>
        <th>Fecha</th>
        <th>Hora</th>
        <th>Contenido</th>
        <th>Observación</th>
        <th>Abrió Enlace</th>
        <th>Marcar Asistencia</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let meeting of meetings">
        <td data-label="Stage">{{ meeting.stage?.number || 'Stage no disponible' }}</td>
        <td data-label="Categoría">{{ meeting.student?.studentClassification || 'Categoría no disponible' }}</td>
        <td data-label="Nombre" style="white-space: normal; vertical-align: top;">
          <span class="clickable is-clickable" (click)="onHistoryClick(meeting)">
            {{ meeting.student?.user?.firstName || 'Nombre no disponible' }} {{ meeting.student?.user?.lastName || '' }}
          </span>
        </td>
        <td data-label="Fecha">{{ meeting.localdate | date: 'mediumDate':'UTC' }}</td>
        <td data-label="Hora">{{ meeting.localhour }}:00</td>
        <td data-label="Contenido">
          <button class="icon-button" (click)="showContent(meeting)">
            <span class="material-icons">menu_book</span>
          </button>
        </td>
        <td data-label="Observación" class="tooltip-container">
          <span class="tooltip" [hidden]="!meeting.student?.user?.comment" [title]="meeting.student?.user?.comment">
            {{ meeting.student?.user?.comment || 'Sin observación' }}
          </span>
        </td>
        <td data-label="Abrió Enlace">
          <ng-container *ngIf="hasMeetingPassed(meeting.localdate, meeting.localhour); else futureMeeting">
            <span *ngIf="meeting.linkOpened; else notOpened">✔️</span>
            <ng-template #notOpened>❌</ng-template>
          </ng-container>
          <ng-template #futureMeeting>-</ng-template>
        </td>
        <td data-label="Marcar Asistencia">
          <input 
            type="checkbox" 
            [checked]="meeting.present"
            (click)="onAssistanceClick($event, meeting)"
            [disabled]="!isToday(meeting.localdate)" 
          />
        </td>
      </tr>
    </tbody>
  </table>
</div>