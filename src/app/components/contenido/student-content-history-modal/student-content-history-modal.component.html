<div class="modal" [ngClass]="{ 'is-active': show }">
  <div class="modal-background"></div>
  <div class="modal-card">

    <div class="student-stage-header">
      <h2 class="student-stage-title">
        Stage del Estudiante: {{ stageDescription || 'No disponible' }}
      </h2>
      <button class="delete" aria-label="close" (click)="onClose()">
        <i class="fas fa-times-circle"></i>
      </button>
    </div>

    <header class="modal-card-head">
      <p class="modal-card-title">
         Historial de Contenidos - {{ currentStageDescription }}
        <span class="stage-navigation-buttons">
          <button 
            class="nav-button" 
            [disabled]="!canGoPrevious" 
            [ngClass]="{ 'disabled': !canGoPrevious }"
            (click)="onPreviousStage()" 
            title="Anterior">
            <i class="fas fa-chevron-left"></i>
          </button>
          <button 
            class="nav-button" 
            [disabled]="!canGoNext" 
            [ngClass]="{ 'disabled': !canGoNext }"
            (click)="onNextStage()" 
            title="Siguiente">
            <i class="fas fa-chevron-right"></i>
          </button>
        </span>
      </p>
    </header>

    <section class="modal-card-body">
      <div class="table-container">
        <table class="table-results is-fullwidth">
          <thead>
            <tr>
              <th *ngFor="let content of stageContents">
                {{ content.title.split(' ')[0] }}
              </th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td *ngFor="let content of stageContents">
                <ng-container *ngFor="let record of getRecordsByContentTitle(content.title)">
                  <ng-container *ngFor="let date of record.dates">
                    <div style="margin-bottom: 1rem;">
                      <div>{{ date | date: 'shortDate' }}</div>
                      <div>{{ instructorName || 'Instructor no disponible' }}</div>
                    </div>
                  </ng-container>
                </ng-container>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

  </div>
</div>
