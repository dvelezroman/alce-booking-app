<div
  class="student-banner"
  [class.warning-banner]="type === 'warning'"
  [class.info-banner]="type === 'info'"
  [class.minimized]="!isExpanded"
  (click)="toggle()"
>
  <span
    class="material-icons"
    [ngClass]="{ 'warning-icon': type === 'warning', 'info-icon': type === 'info' }"
  >
    {{ icon }}
  </span>

  <div class="banner-body">
    <div class="banner-title">
      <ng-container *ngIf="isExpanded; else minimizedTitle">{{ title }}</ng-container>
      <ng-template #minimizedTitle>{{ title }} &#33;</ng-template>
    </div>

    <div class="banner-text" *ngIf="isExpanded">
    <p *ngIf="text">{{ text }}</p>

      <ng-container *ngFor="let item of assessments">
        <ng-container *ngIf="item.note || (item.resources?.length ?? 0) > 0">
          <div class="assessment-block">
            <p><strong>Evaluación:</strong> {{ item.type }}</p>

            <div class="resource-note" *ngIf="item.note">
              <strong>Nota:</strong> {{ item.note }}
            </div>

            <div *ngIf="item.resources?.length">
              <strong>Recomendación:</strong>
              <ul class="resource-list">
                <li *ngFor="let res of item.resources">
                  <a [href]="res.link" target="_blank" rel="noopener noreferrer">
                    {{ res.title }}
                  </a>
                </li>
              </ul>
            </div>

            <hr class="separator" *ngIf="relevantAssessments.length > 1" />
          </div>
        </ng-container>
      </ng-container>
    </div>
  </div>

  <button class="toggle-banner-btn" (click)="toggle(); $event.stopPropagation()">
    <span class="material-icons">
      {{ isExpanded ? 'expand_less' : 'expand_more' }}
    </span>
  </button>
</div>