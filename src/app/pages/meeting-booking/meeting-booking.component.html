<div class="class-booking-header">
  <h1 class="title is-3">Class Booking</h1>
</div>
<div class="booking-container container">
  <div class="columns is-mobile">
    
    <!-- Primer bloque: Información del estudiante -->
    <div class="column student-info" style="flex: 0 0 30%;">
      <div class="student-photo">
        <img src="/assets/foto usuario default.png" alt="Foto del estudiante">
      </div>
      <div class="student-name">
        <h2>{{ studentName }}</h2>
      </div>
      <div class="student-details">
        <p>{{ studentDetails }}</p>
      </div>
    </div>


 <!-- Segundo bloque Selector de mes -->
 <div class="column date-time-selection" style="flex: 0 0 30%;">
  <h3 class="title is-4">Select a date & time</h3>
  

  <div class="month-selector">
    <button class="button is-small" (click)="prevMonth()">&#60;</button>
    <span>{{ selectedMonth }} {{ selectedYear }}</span>
    <button class="button is-small" (click)="nextMonth()">&#62;</button>
  </div>


  <div class="calendar">
    <div class="calendar-header">
      <div class="calendar-day-header">Sun</div>
      <div class="calendar-day-header">Mon</div>
      <div class="calendar-day-header">Tue</div>
      <div class="calendar-day-header">Wed</div>
      <div class="calendar-day-header">Thu</div>
      <div class="calendar-day-header">Fri</div>
      <div class="calendar-day-header">Sat</div>
    </div>

    <!-- Días del mes seleccionado -->
    <div class="calendar-grid">
      <div 
      *ngFor="let day of currentMonthDays" 
      class="calendar-day"
      (click)="isDaySelectable(day) ? selectDay(day) : null"
      [class.selected]="selectedDay === day.day"
      [class.selectable]="isDaySelectable(day)"
      [class.unselectable]="!isDaySelectable(day)"> 
      {{ day.day }}
    </div>
    </div>
  </div>
<!--<div class="selected-date">
    <h4 class="title is-5">{{ selectedDayFormatted || "Selecciona una fecha" }}</h4>
  </div>-->
</div>



    <!-- Tercer bloque: Detalles de la fecha y horarios -->
    <div class="column selected-date-time" style="flex: 0 0 30%;">

    
      <!-- Horarios disponibles -->
      <div class="time-slots">
        <div 
          class="time-slot" 
          *ngFor="let time of timeSlots" 
          (mouseenter)="showConfirm = time" 
          (mouseleave)="showConfirm = null">
          
          <!-- Contenedor de la hora -->
          <div class="time-text-container">
            <span class="time-text">{{ time }}</span>
          </div>
      
          <!-- Botón Confirmar -->
          <div class="confirm-box" *ngIf="showConfirm === time" (click)="selectTimeSlot(time)">
            Confirm
          </div>
        </div>
      </div>
    </div>
  </div>
</div>







<!-- Modal de error -->
<div *ngIf="showModal" class="modal-overlay">
  <div class="modal-content error-modal">
    <i class="fas fa-exclamation-circle error-icon"></i>
    <p class="help is-danger bold-text">You must select a date</p>
    <p class="help is-danger small-text">before choosing a time slot.</p>
  </div>
</div>

<!-- Modal exitoso con botones para confirmar o cancelar -->
<div *ngIf="showSuccessModal" class="modal-overlay">
  <div class="modal-content success-modal">
    <i class="fas fa-question-circle question-icon"></i> 
    <p>You have selected <br> {{ selectedDayFormatted }} at {{ selectedTimeSlot }}.</p>
    
    <!-- Confirmation and cancellation buttons -->
    <div class="modal-buttons">
      <button class="button is-success" (click)="confirmSelection()">Accept</button>
      <button class="button is-danger" (click)="cancelSelection()">Cancel</button>
    </div>
  </div>
</div>

<div *ngIf="showInfoModal" class="modal-overlay">
  <div class="modal-content info-modal">
    <i class="fas fa-check-circle info-icon"></i>
    <p>Your selection was successful!</p>
  </div>
</div>