<div class="attendance-title">
    <h1>Asistencias Instructores</h1>
  </div>

  <section class="attendance-section">
    <div class="attendance-search">
      <form>
        <!-- Selección de instructor -->
        <div class="field">
          <div class="control">
            <input
              class="input"
              type="text"
              placeholder="Nombre del Instructor"
              [(ngModel)]="filter.instructorName"
              (input)="filterInstructors()"
              (blur)="hideDropdown()"
              name="instructorName"
              autocomplete="off"/>
            <!-- Lista desplegable de instructores filtrados -->
            <div *ngIf="showDropdown" class="dropdown">
              <div *ngIf="filteredInstructors.length === 0" class="no-results1">
                No se encontraron instructores
              </div>
              <ul *ngIf="filteredInstructors.length > 0">
                <li
                  *ngFor="let instructor of filteredInstructors"
                  (click)="selectInstructor(instructor)">
                  {{ instructor.firstName }} {{ instructor.lastName }}
                </li>
              </ul>
            </div>
          </div>
        </div>

        <!-- Campos de fecha desde y hasta -->
        <div class="columns is-mobile">
          <div class="column">
            <div class="field">
              <label class="label">Desde</label>
              <div class="control">
                <input class="input" type="date" [(ngModel)]="filter.from" name="from" required min="2024-10-01" max="2024-12-31">
              </div>
            </div>
          </div>
          <div class="column">
            <div class="field">
              <label class="label">Hasta</label>
              <div class="control">
                <input class="input" type="date" [(ngModel)]="filter.to" name="to" name="from" required min="2024-10-01" max="2024-12-31">
              </div>
            </div>
          </div>
        </div>

        <div class="columns is-mobile">
          <div class="column">
            <label class="label">Mostrar todas las:</label>
                <div class="select is-fullwidth">
                  <select
                    [(ngModel)]="filter.present"
                    name="present"
                  >
                    <option *ngFor="let option of [{ value: 'true', label: 'Asistidas' }, { value: 'false', label: 'No Asistidas'}]" [ngValue]="option.value">
                      {{ option.label }}
                    </option></select>
            </div>
          </div>
        </div>

        <!-- Botón de buscar -->
        <div class="columns is-mobile">
          <div class="column">
            <div class="field">
              <button class="button is-primary is-fullwidth" (click)="searchInstructorAttendance()">Buscar</button>
            </div>
          </div>
        </div>
      </form>
    </div>

    <!-- Tabla de resultados instructores datos -->
    <div class="meeting-results" *ngIf="meetings.length > 0">
      <table class="table is-fullwidth">
        <thead>
          <tr>
            <th>Stage</th>
            <th>Categoría</th>
            <th>Modalidad</th>
            <th>Fecha</th>
            <th>Hora</th>
            <th>Modo</th>
<!--            <th>Asistida</th>-->
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of meetings">
            <td>{{ item.meetings[0].stage?.number }}</td>
            <td>{{ item.meetings[0].category }}</td>
            <td>{{ item.meetings[0].mode }}</td>
            <td>{{ item.date | date: 'mediumDate':'UTC' }}</td>
            <td>{{ item.hour }}:00</td>
            <td>{{ item.meetings[0].mode }}</td>
<!--            <td class="attendance-icon">-->
<!--              <span class="material-icons" [ngClass]="itemmeeting.present ? 'icon-yes' : 'icon-no'">-->
<!--                {{ meeting.present ? 'check' : 'close' }}-->
<!--              </span>-->
<!--            </td>-->
          </tr>
        </tbody>
      </table>
    </div>

    <div *ngIf="searchAttempted && meetings.length === 0" class="no-results">
      No se encontraron registros para los criterios seleccionados.
    </div>
  </section>
