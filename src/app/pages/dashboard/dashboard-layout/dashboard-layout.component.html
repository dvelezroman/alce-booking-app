<div class="content-wrapper">
  <app-sidebar
    [isSidebarClosed]="isSidebarClosed"
    [unreadCount]="unreadCount$ | async"
    (toggleSidebarEvent)="toggleSidebar()"
    (logoutEvent)="onConfirmLogout()"
    *ngIf="isLoggedIn && (isRegistered || userData?.role !== UserRole.STUDENT)">
  </app-sidebar>

  <main class="main-content" [ngClass]="{ 'shrink': isLoggedIn && !isSidebarClosed, 'full-width': !isLoggedIn }">

    <app-unread-banner
      *ngIf="isLoggedIn"
      [count]="(unreadCount$ | async) ?? 0"
      [showDurationMs]="10000">
    </app-unread-banner>

    <app-global-notice-banner *ngIf="isLoggedIn && userData?.role === UserRole.STUDENT" />

    <div class="student-banners-container" *ngIf="isLoggedIn && userData?.role === UserRole.STUDENT">
      <app-student-banner
        *ngIf="userData?.meetingsAlert"
        type="warning"
        title="Aviso"
        [text]="'Has agendado menos horas de clase de las recomendadas esta semana. Se sugiere al menos ' + minHoursRequired + ' horas semanales.'"
        icon="warning_amber"
      />

      <app-student-banner
        *ngIf="shouldShowAssessmentBanner"
        type="info"
        title="Mensaje nuevo"
        text="Tu instructor te ha dejado una nota y recomendaciones con recursos de apoyo."
        icon="info"
        [resources]="userData?.assessmentResources ?? []"
        />
      </div>
      <router-outlet></router-outlet>
      
    </main>
  </div>