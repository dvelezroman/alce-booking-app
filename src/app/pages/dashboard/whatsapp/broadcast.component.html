<section class="section whatsapp-section">
  <div class="content">
    <h1 class="reports-progress-header reports-progress-title">Envíos por WhatsApp</h1>

    <!-- Bloque único -->
    <div class="card card--padded big-block">
      <app-broadcast-filters
        [selectedType]="filters.type"
        (typeChange)="onTypeChange($event)">
      </app-broadcast-filters>

      <!-- Error (opcional) -->
      <div *ngIf="error" class="error-msg">{{ error }}</div>

      <app-group-selector
        [type]="filters.type"
        [query]="filters.query"
        [selectedGroupId]="filters.selectedGroupId"
        [groups]="groups"
        [diffusionGroups]="diffusionGroups"
        [loading]="loading"
        (selectionChange)="onSelectionChange($event)"
        (contactsSelected)="onContactsSelected($event)">
      </app-group-selector>

      <app-message-composer
        (messageChange)="onMessageChange($event)">
      </app-message-composer>

      <!-- Footer simplificado -->
      <div class="footer-bar">
        <div class="footer-actions">
          <button class="btn btn-primary" (click)="onSend()" [disabled]="loading">Enviar</button>
        </div>
      </div>
    </div>
  </div>
</section>

<app-modal
  [showModal]="modal.show"
  [message]="modal.message"
  [isError]="modal.isError"
  [isSuccess]="modal.isSuccess"
  [isInfo]="modal.isInfo"
  (close)="modal.close()">
</app-modal>