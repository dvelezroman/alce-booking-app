<section class="inbox-root">
  <div class="inbox-page">
    <!-- Header -->
    <header class="inbox-header">
      <div class="title-block">
        <h1 class="title">Recibidos</h1>
        <p class="subtitle">Notificaciones recibidas</p>
      </div>
      <div class="stats">
        <span class="unread">
          No leídas: <strong>{{ unreadCount$ | async }}</strong>
        </span>
      </div>
    </header>

    <!-- Filtros -->
    <app-inbox-filters
      [readDays]="readDays"
      (readDaysChange)="onReadDaysChange($event)">
    </app-inbox-filters>

    <!-- Separador -->
    <div class="divider"></div>

    <!-- Lista de notificaciones -->
    <section class="notifications-list">

      <!-- Error -->
      <div *ngIf="!loading && errorMsg" class="error">
        {{ errorMsg }}
      </div>

      <!-- Sin resultados -->
      <div *ngIf="!loading && !errorMsg && notifications.length === 0" class="placeholder">
        No hay notificaciones para los filtros seleccionados.
      </div>

          <!-- Tabla -->
      <div *ngIf="!loading && notifications.length > 0" class="table-wrapper">
        <div class="table-header">
          <div class="col-from">De</div>
          <div class="col-title">Asunto</div>
          <div class="col-date">Fecha</div>
        </div>

        <div
          class="table-row"
          *ngFor="let n of notifications; trackBy: trackById"
          [class.unread]="!n.isRead"
          (click)="onRowClick(n)"
          role="button"
          tabindex="0"
        >
          <!-- De -->
          <div class="col-from">
            {{ n.fromUser.firstName || '' }} {{ n.fromUser.lastName || '' }}
            <span *ngIf="!n.fromUser?.firstName && !n.fromUser?.lastName">
              {{ n.fromUser.email || '—' }}
            </span>
          </div>

          <!-- Asunto (título + snippet en una sola fila) -->
          <div class="col-title">
            <div class="subject-row">
              <span class="title" [title]="n.title">{{ n.title }}</span>
              <span class="sep">—</span>
              <span class="snippet-inline" *ngIf="n.message?.body as body">
                {{ body }}
              </span>
            </div>
          </div>

          <!-- Fecha -->
          <div class="col-date">
            {{ n.createdAt | date: 'short' }}
          </div>
        </div>
      </div>
    </section>
  </div>
</section>