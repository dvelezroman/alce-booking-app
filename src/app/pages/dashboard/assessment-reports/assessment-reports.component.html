<section class="section">
  <h1 class="reports-progress-header reports-progress-title">
    Reportes de Evaluaciones
  </h1>

  <app-assessment-report-form
    (searchTriggered)="handleAssessmentSearch($event)"
    (stageSelected)="handleStageSelected($event)">
  </app-assessment-report-form>

  <ng-container *ngIf="selectedStudentId !== null; else multiTable">
    <div class="assessment-table-wrapper">
      <app-assessment-table-reports
        [assessments]="assessments"
        [stagesWithContent]="stagesWithContent"
        [maxPointsAssessment]="maxPointsAssessment"
        [minPointsAssessment]="minPointsAssessment"
        (evaluationClicked)="showEvaluationDetails($event)" 
      />
    </div>
  </ng-container>

  <ng-template #multiTable>
    <div class="assessment-wrapper-2">
      <app-assessment-multi-table
        [assessments]="assessments"
        [maxPointsAssessment]="maxPointsAssessment"
        [minPointsAssessment]="minPointsAssessment"
        [stageTitle]="stageDescription"
      />
    </div>
  </ng-template>
</section>

<app-modal
  [showModal]="modal.show"
  [message]="modal.message"
  [isError]="modal.isError"
  [isSuccess]="modal.isSuccess"
  [isInfo]="modal.isInfo"
  [title]="modal.title ?? ''"
  [isContentViewer]="modal.isContentViewer ?? false"
  [showButtons]="modal.showButtons ?? false"
  (confirmAction)="modal.confirm && modal.confirm()"
  (close)="modal.close()"
/>
