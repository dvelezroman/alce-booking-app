<section class="section">
  <div class="content">
    <h1 class="reports-progress-header reports-progress-title">
      EnvÃ­o de Emails
    </h1>

    <!-- Panel de opciones -->
    <app-email-panel
      [userRole]="userRole"
      (sendOptionSelected)="onSendOptionSelected($event)"
    ></app-email-panel>

    <!-- Formulario visible solo cuando hay tipo seleccionado -->
    <app-email-form-wrapper
      *ngIf="selectedAction"
      [selectedType]="selectedAction"
      [stages]="stages"
      [userRole]="userRole"
      [groups]="groups"
      (submitEmail)="handleEmailSubmit($event)"
      (submitSingleEmail)="handleSingleEmailSubmit($event)"
      (invalidSingleEmail)="handleInvalidSingleEmail($event)"
      class="form-wrapper-host"
    ></app-email-form-wrapper>
  </div>
</section>

<!-- Modal de feedback -->
<app-modal
  [showModal]="modal.show"
  [message]="modal.message"
  [isError]="modal.isError"
  [isSuccess]="modal.isSuccess"
  [title]="modal.title || ''"
  (close)="modal.close()"
/>