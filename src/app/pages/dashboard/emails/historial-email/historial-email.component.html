<section class="inbox-root">
  <div class="inbox-page">
    <!-- Header -->
    <h1 class="inbox-page-title">
      Historial Emails Enviados
    </h1>

    <!-- Filtros -->
    <app-email-filters
      [filters]="filters"
      (filtersChange)="onFiltersChange($event)">
    </app-email-filters>

    <!-- Separador -->
    <div class="divider"></div>

    <!-- Lista de emails -->
    <section class="emails-list">
      <!-- Error -->
      <div *ngIf="!loading && errorMsg" class="error">
        {{ errorMsg }}
      </div>

      <!-- Sin resultados -->
      <div *ngIf="!loading && !errorMsg && emails.length === 0" class="placeholder">
        No hay correos enviados que coincidan con los filtros seleccionados.
      </div>

      <!-- Tabla -->
      <div *ngIf="!loading && emails.length > 0" class="table-wrapper">
        <div class="table-header">
          <div class="col-to">Para</div>
          <div class="col-subject">Asunto</div>
          <div class="col-status">Estado</div>
          <div class="col-date">Fecha</div>
        </div>

        <div
          class="table-row"
          *ngFor="let e of emails; trackBy: trackById"
          (click)="onRowClick(e)"
          role="button"
          tabindex="0"
        >
          <!-- Para -->
          <div class="col-to">
            {{ e.recipientName || e.recipientEmail || '—' }}
          </div>

          <!-- Asunto -->
          <div class="col-subject">
            {{ e.subject }}
          </div>

          <!-- Estado -->
          <div class="col-status">
              {{ getStatusLabel(e.status) }}
          </div>

          <!-- Fecha -->
          <div class="col-date">
            {{ e.createdAt | date: 'short' }}
          </div>
        </div>
      </div>

      <!-- Paginación -->
      <div class="pagination" *ngIf="total > 0">
        <button
          class="pg-btn"
          (click)="onPrev()"
          [disabled]="page === 1"
          aria-label="Página anterior">
          ‹
        </button>

        <span class="pg-info">
          Página {{ page }}
          <span class="sep">·</span>
          Mostrando {{ startIndex }} – {{ endIndex }} de {{ total }}
        </span>

        <button
          class="pg-btn"
          (click)="onNext()"
          [disabled]="page * limit >= total"
          aria-label="Página siguiente">
          ›
        </button>
      </div>
    </section>
  </div>
</section>