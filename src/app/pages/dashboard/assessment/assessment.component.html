<section class="section">
    <h1 class="reports-progress-header reports-progress-title">
        Evaluar Estudiante
    </h1>

  <app-assessment-form
    [instructorId]="instructorId"
    [blockedTypes]="blockedTypes"
    [availableResources]="transformedResources"
    [minPointsAssessment]="minPointsAssessment"
    (assessmentCreated)="handleAssessmentCreated($event)"
    (studentSelected)="fetchAssessments($event.studentId.toString(), $event.stageId)"
    (studentSelected)="handleStudentSelected($event)"
  ></app-assessment-form>

  <div *ngIf="selectedStudent" class="box has-background-light">
    <p class="is-size-6 has-text-weight-semibold">
      {{ selectedStudent.firstName }} {{ selectedStudent.lastName }}
    </p>
    <p class="is-size-6 has-text-grey-dark">
      Stage actual:
      <span class="has-text-weight-semibold">
        {{ selectedStudent.student?.stage?.description ?? 'No asignado' }}
      </span>
    </p>
  </div>

  <div class="assessment-table-wrapper">
    <app-assessment-table 
      [assessments]="assessments"
      [minPointsAssessment]="minPointsAssessment"
     />
  </div>
  <div class="no-results" *ngIf="hasSearched && assessments.length === 0">
    No hay evaluaciones disponibles para este estudiante.
  </div>

</section>

 <app-modal
    [showModal]="modal.show"
    [message]="modal.message"
    [isError]="modal.isError"
    [isSuccess]="modal.isSuccess"
    [isInfo]="modal.isInfo"
    [showButtons]="modal.showButtons ?? false"
    (confirmAction)="modal.confirm && modal.confirm()"
    (close)="modal.close()"
  />