<section class="section">
  <div class="content">
    <!-- Cabecera -->
    <h1 class="reports-progress-header reports-progress-title">
      Perfil de Usuario
    </h1>

    <!-- Card con datos -->
    <div class="profile-card" *ngIf="userData$ | async as user">
      <div class="profile-header">
        <div class="avatar">
          {{ user.firstName?.[0] || '?' }}{{ user.lastName?.[0] || '' }}
        </div>
        <div class="user-info">
          <h2>{{ user.firstName }} {{ user.lastName }}</h2>
          <p class="role">{{ user.role }}</p>
          <p class="email">{{ user.emailAddress || user.email }}</p>
        </div>
      </div>

      <div class="profile-details">
        <p><strong>Contacto:</strong> {{ user.contact || "No especificado" }}</p>
        <p><strong>País:</strong> {{ user.country || "No especificado" }}</p>
        <p><strong>Ciudad:</strong> {{ user.city || "No especificado" }}</p>
        <p>
          <strong>Cumpleaños:</strong>
          {{ user?.birthday ? formatBirthday(user.birthday) : "No registrado" }}
        </p>
        <p><strong>Estado:</strong> {{ user.status || "Activo" }}</p>
        <p><strong>Comentario:</strong> {{ user.comment || "Ninguno" }}</p>
        <p>
          <strong>Datos completados:</strong>
          {{ user.dataCompleted ? "Sí" : "No" }}
        </p>
      </div>

      <!-- Botón para editar -->
      <div class="profile-actions">
        <button class="edit-btn" (click)="openEditForm()">
          {{
            user.dataCompleted ? "Editar información" : "Completar información"
          }}
        </button>
      </div>
    </div>

    <!-- Modal con formulario de edición -->
    <app-users-info-form
      *ngIf="showUserInfoForm"
      [isModalOpen]="true"
      [dataCompleted]="dataCompleted"
      (formSubmit)="handleUserInfoSubmit($event)"
      (closeModal)="showUserInfoForm = false" >
    </app-users-info-form>

    <!-- Modal de feedback -->
    <app-modal
      [showModal]="modal.show"
      [message]="modal.message"
      [isError]="modal.isError"
      [isSuccess]="modal.isSuccess"
      [title]="modal.title || ''"
      (close)="modal.close()"
    >
    </app-modal>
  </div>
</section>